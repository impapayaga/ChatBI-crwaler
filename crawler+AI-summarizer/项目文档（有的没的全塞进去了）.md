# æ”¿ç­–æ–‡ä»¶æ™ºèƒ½åˆ†æç³»ç»Ÿ - é¡¹ç›®æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: æ”¿ç­–æ–‡ä»¶æ™ºèƒ½åˆ†æç³»ç»Ÿ   
**æŠ€æœ¯æ ˆ**: Python + FastAPI + SQLite + AI API  
**åŠŸèƒ½**: è‡ªåŠ¨çˆ¬å–æ”¿åºœæ”¿ç­–æ–‡ä»¶ï¼Œä½¿ç”¨AIè¿›è¡Œæ™ºèƒ½æ€»ç»“åˆ†æ  

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ”¿ç­–æ–‡ä»¶æ™ºèƒ½åˆ†æç³»ç»Ÿ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   çˆ¬è™«æ¨¡å—   â”‚    â”‚   AIæ€»ç»“æ¨¡å—  â”‚    â”‚   å®šæ—¶è°ƒåº¦   â”‚     â”‚
â”‚  â”‚  crawler.py â”‚    â”‚ai_summarizer â”‚    â”‚ scheduler.py â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                æ•°æ®åº“å±‚ (SQLite)                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ æ”¿ç­–æ–‡ä»¶è¡¨   â”‚  â”‚  AIæ€»ç»“è¡¨   â”‚  â”‚  é…ç½®è¡¨     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚PolicyFile  â”‚  â”‚AISummary   â”‚  â”‚CrawlConfig â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                APIæ¥å£å±‚ (FastAPI)                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  æ•°æ®æ¥å£   â”‚  â”‚  æ“ä½œæ¥å£   â”‚  â”‚  ç»Ÿè®¡æ¥å£   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚/api/policiesâ”‚  â”‚/api/crawl  â”‚  â”‚/api/stats  â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                å‰ç«¯å±•ç¤ºå±‚ (HTML/JS)                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  æ•°æ®å±•ç¤º   â”‚  â”‚  æ“ä½œæ§åˆ¶   â”‚  â”‚  ç»Ÿè®¡ä¿¡æ¯   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  æ”¿ç­–åˆ—è¡¨   â”‚  â”‚  çˆ¬å–æŒ‰é’®   â”‚  â”‚  æ•°æ®ç»Ÿè®¡   â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ¶æ„è¯´æ˜

**åç«¯æ¶æ„**: é‡‡ç”¨åˆ†å±‚æ¶æ„æ¨¡å¼
- **æ•°æ®å±‚**: SQLiteæ•°æ®åº“ + SQLAlchemy ORM
- **ä¸šåŠ¡å±‚**: çˆ¬è™«æ¨¡å— + AIæ€»ç»“æ¨¡å— + è°ƒåº¦å™¨æ¨¡å—
- **æ¥å£å±‚**: FastAPI RESTful API

**æ•°æ®æµ**: çˆ¬å– â†’ å­˜å‚¨ â†’ AIæ€»ç»“ â†’ APIæ¥å£ â†’ å‰ç«¯å±•ç¤º

## ğŸ“ æ–‡ä»¶ç»“æ„è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶

#### 1. `main.py` - ä¸»ç¨‹åºå…¥å£
**åŠŸèƒ½**:
- APIæœåŠ¡æ¨¡å¼ (`--mode api`)
- å®šæ—¶è°ƒåº¦æ¨¡å¼ (`--mode scheduler`)
- ç«‹å³æ‰§è¡Œæ¨¡å¼ (`--mode run_once`)

**å¯åŠ¨æ–¹å¼**:
```bash
# APIæœåŠ¡æ¨¡å¼
python main.py --mode api

# å®šæ—¶è°ƒåº¦æ¨¡å¼
python main.py --mode scheduler --schedule weekly

# ç«‹å³æ‰§è¡Œæ¨¡å¼
python main.py --mode run_once
```

#### 2. `database.py` - æ•°æ®åº“æ¨¡å‹
**ä½œç”¨**: å®šä¹‰æ•°æ®åº“è¡¨ç»“æ„å’ŒORMæ¨¡å‹  
**æ¶æ„**: SQLAlchemy ORM + SQLite  
**åŒ…å«æ¨¡å‹**:
- `PolicyFile`: æ”¿ç­–æ–‡ä»¶è¡¨
- `AISummary`: AIæ€»ç»“è¡¨
- `CrawlConfig`: çˆ¬å–é…ç½®è¡¨

**æ ¸å¿ƒåŠŸèƒ½**:
- æ•°æ®åº“è¿æ¥ç®¡ç†
- è¡¨ç»“æ„å®šä¹‰
- æ•°æ®æ¨¡å‹æ˜ å°„

#### 3. `crawler.py` - çˆ¬è™«æ¨¡å—
**ä½œç”¨**: çˆ¬å–æ”¿åºœç½‘ç«™æ”¿ç­–æ–‡ä»¶  
**æ¶æ„**: é¢å‘å¯¹è±¡è®¾è®¡ + è¯·æ±‚åº“  
**ç›®æ ‡ç½‘ç«™**:
- åŒ—äº¬å¸‚æ”¿åºœ: `https://www.beijing.gov.cn/zhengce/zhengcefagui/`
- å¹¿ä¸œçœæ”¿åºœ: `https://www.gd.gov.cn/zwgk/wjk/qbwj/index.html`

**æ ¸å¿ƒåŠŸèƒ½**:
- ç½‘é¡µå†…å®¹çˆ¬å–
- å…³é”®è¯è¿‡æ»¤ï¼ˆäººå·¥æ™ºèƒ½ã€åŒ»ç–—å™¨æ¢°ã€ç”Ÿç‰©åŒ»è¯ï¼‰
- æ•°æ®æ¸…æ´—å’Œå»é‡
- å‘å¸ƒå•ä½æå–ï¼ˆç‰¹æ„åŠ çš„æ¨¡å—ä¸ç„¶æå–ä¸åˆ°å‘å¸ƒå•ä½ã€‚ã€‚ï¼‰

#### 4. `ai_summarizer.py` - AIæ€»ç»“æ¨¡å—
**ä½œç”¨**: ä½¿ç”¨AIå¯¹æ”¿ç­–æ–‡ä»¶è¿›è¡Œæ™ºèƒ½æ€»ç»“  
**æ¶æ„**: HTTPå®¢æˆ·ç«¯ + AI API  
**AIæœåŠ¡**: SiliconFlow API  
**æ¨¡å‹**: Qwen/Qwen2.5-7B-Instruct

**æ ¸å¿ƒåŠŸèƒ½**:
- è°ƒç”¨AI APIè¿›è¡Œæ–‡æœ¬æ€»ç»“
- ç»“æ„åŒ–è¾“å‡ºï¼ˆæ ‡é¢˜ã€å•ä½ã€æ—¥æœŸã€æ‘˜è¦ã€é“¾æ¥ï¼‰

#### 5. `scheduler.py` - å®šæ—¶è°ƒåº¦æ¨¡å—
**ä½œç”¨**: å®šæ—¶æ‰§è¡Œçˆ¬å–å’ŒAIæ€»ç»“ä»»åŠ¡  
**æ¶æ„**: è°ƒåº¦å™¨æ¨¡å¼ + å®šæ—¶ä»»åŠ¡  
**è°ƒåº¦æ¨¡å¼**:
- æ¯å‘¨æ‰§è¡Œï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰
- æ¯æ—¥æ‰§è¡Œï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰
- æ¯å°æ—¶æ‰§è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**:
- å®šæ—¶ä»»åŠ¡è°ƒåº¦
- ä»»åŠ¡çŠ¶æ€ç®¡ç†
- é”™è¯¯é‡è¯•æœºåˆ¶
- æ‰§è¡Œæ—¥å¿—è®°å½•

#### 6. `api.py` - APIæ¥å£å±‚
**ä½œç”¨**: æä¾›RESTful APIæ¥å£  
**æ¶æ„**: FastAPIæ¡†æ¶ + ä¾èµ–æ³¨å…¥  
**æ¥å£åˆ—è¡¨**:
- `GET /api/policies` - è·å–æ”¿ç­–æ–‡ä»¶åˆ—è¡¨
- `GET /api/summaries` - è·å–AIæ€»ç»“åˆ—è¡¨
- `GET /api/stats` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `POST /api/crawl` - å¯åŠ¨çˆ¬å–ä»»åŠ¡
- `POST /api/summarize` - å¯åŠ¨AIæ€»ç»“ä»»åŠ¡

### é…ç½®æ–‡ä»¶

#### 7. `requirements.txt` - ä¾èµ–åŒ…åˆ—è¡¨
**ä½œç”¨**: å®šä¹‰é¡¹ç›®ä¾èµ–çš„PythonåŒ…  
**åŒ…å«**: FastAPIã€SQLAlchemyã€requestsã€beautifulsoup4ç­‰

#### 8. `policy_data.db` - æ•°æ®åº“æ–‡ä»¶
**ä½œç”¨**: SQLiteæ•°æ®åº“æ–‡ä»¶ï¼Œå­˜å‚¨æ‰€æœ‰æ•°æ®  
**åŒ…å«è¡¨**: æ”¿ç­–æ–‡ä»¶è¡¨ã€AIæ€»ç»“è¡¨ã€é…ç½®è¡¨

### å¯åŠ¨è„šæœ¬

#### 9. `start.bat` - ä¸»å¯åŠ¨è„šæœ¬
**ä½œç”¨**: æä¾›äº¤äº’å¼å¯åŠ¨èœå•  
**åŠŸèƒ½**: å¯åŠ¨APIæœåŠ¡ã€æ‰“å¼€å‰ç«¯ã€æŸ¥çœ‹æ•°æ®ç­‰

#### 10. `start_scheduler.bat` - è°ƒåº¦å™¨å¯åŠ¨è„šæœ¬
**ä½œç”¨**: å¯åŠ¨æ¯å‘¨è‡ªåŠ¨çˆ¬å–è°ƒåº¦å™¨

#### 11. `start_daily_scheduler.bat` - æ¯æ—¥è°ƒåº¦å™¨å¯åŠ¨è„šæœ¬
**ä½œç”¨**: å¯åŠ¨æ¯æ—¥è‡ªåŠ¨çˆ¬å–è°ƒåº¦å™¨ï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰

### å‰ç«¯æ–‡ä»¶

#### 12. `demo_frontend.html` - å‰ç«¯ç•Œé¢
**ä½œç”¨**: æä¾›Webç•Œé¢å±•ç¤ºæ•°æ®  
**æ¶æ„**: HTML + CSS + JavaScript  
**åŠŸèƒ½**: æ•°æ®å±•ç¤ºã€æ“ä½œæ§åˆ¶ã€ç»Ÿè®¡ä¿¡æ¯

### å·¥å…·æ–‡ä»¶

#### 13. `check_data.py` - æ•°æ®æ£€æŸ¥å·¥å…·
**ä½œç”¨**: æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ•°æ®è´¨é‡å’Œç»Ÿè®¡ä¿¡æ¯

## ğŸš€ åç«¯å¯åŠ¨æ–¹å¼

### 1. APIæœåŠ¡æ¨¡å¼ï¼ˆæ¨èï¼‰
```bash
# å¯åŠ¨APIæœåŠ¡
python main.py --mode api

# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
start.bat
```

**åŠŸèƒ½**: æä¾›RESTful APIæ¥å£ï¼Œæ”¯æŒå‰ç«¯è°ƒç”¨

### 2. å®šæ—¶è°ƒåº¦æ¨¡å¼
```bash
# æ¯å‘¨è‡ªåŠ¨çˆ¬å–
python main.py --mode scheduler --schedule weekly

# æ¯æ—¥è‡ªåŠ¨çˆ¬å–ï¼ˆæµ‹è¯•ï¼‰
python main.py --mode scheduler --schedule daily

# æ¯å°æ—¶è‡ªåŠ¨çˆ¬å–ï¼ˆå¼€å‘ï¼‰
python main.py --mode scheduler --schedule hourly
```

**åŠŸèƒ½**: å®šæ—¶æ‰§è¡Œçˆ¬å–å’ŒAIæ€»ç»“ä»»åŠ¡

### 3. ç«‹å³æ‰§è¡Œæ¨¡å¼
```bash
# ç«‹å³æ‰§è¡Œä¸€æ¬¡çˆ¬å–å’Œæ€»ç»“
python main.py --mode run_once
```

**åŠŸèƒ½**: æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡å®Œæ•´çš„çˆ¬å–å’Œæ€»ç»“æµç¨‹

## ğŸ”Œ å‰ç«¯è°ƒç”¨åç«¯API

### APIåŸºç¡€ä¿¡æ¯
- **æœåŠ¡åœ°å€**: `http://localhost:8000`
- **APIæ–‡æ¡£**: `http://localhost:8000/docs`
- **å¥åº·æ£€æŸ¥**: `http://localhost:8000/api/stats`

### æ ¸å¿ƒAPIæ¥å£

#### 1. è·å–æ”¿ç­–æ–‡ä»¶åˆ—è¡¨
```javascript
// è¯·æ±‚
GET http://localhost:8000/api/policies

// å“åº”
{
  "policies": [
    {
      "id": 1,
      "title": "æ”¿ç­–æ–‡ä»¶æ ‡é¢˜",
      "source": "åŒ—äº¬å¸‚æ”¿åºœ",
      "url": "https://...",
      "publish_date": "2024-01-01",
      "publish_unit": "åŒ—äº¬å¸‚ç§‘å­¦æŠ€æœ¯å§”å‘˜ä¼š",
      "keywords_found": "äººå·¥æ™ºèƒ½",
      "content": "æ”¿ç­–å†…å®¹...",
      "created_at": "2024-01-01T00:00:00"
    }
  ]
}
```

#### 2. è·å–AIæ€»ç»“åˆ—è¡¨
```javascript
// è¯·æ±‚
GET http://localhost:8000/api/summaries

// å“åº”
{
  "summaries": [
    {
      "id": 1,
      "title": "æ”¿ç­–æ–‡ä»¶æ ‡é¢˜",
      "publish_unit": "åŒ—äº¬å¸‚ç§‘å­¦æŠ€æœ¯å§”å‘˜ä¼š",
      "publish_date": "2024-01-01",
      "summary": "AIç”Ÿæˆçš„æ€»ç»“å†…å®¹...",
      "url": "https://...",
      "created_at": "2024-01-01T00:00:00"
    }
  ]
}
```

#### 3. è·å–ç»Ÿè®¡ä¿¡æ¯
```javascript
// è¯·æ±‚
GET http://localhost:8000/api/stats

// å“åº”
{
  "total_policies": 23,
  "total_summaries": 22,
  "beijing_policies": 19,
  "guangdong_policies": 4
}
```

#### 4. å¯åŠ¨çˆ¬å–ä»»åŠ¡
```javascript
// è¯·æ±‚
POST http://localhost:8000/api/crawl

// å“åº”
{
  "success": true,
  "message": "çˆ¬å–å®Œæˆï¼Œæ–°å¢ 5 æ¡æ”¿ç­–æ–‡ä»¶",
  "total_found": 5
}
```

#### 5. å¯åŠ¨AIæ€»ç»“ä»»åŠ¡
```javascript
// è¯·æ±‚
POST http://localhost:8000/api/summarize

// å“åº”
{
  "success": true,
  "message": "AIæ€»ç»“å®Œæˆï¼Œæ–°å¢ 3 æ¡æ€»ç»“",
  "processed_count": 3
}
```

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

#### JavaScriptè°ƒç”¨ç¤ºä¾‹
```javascript
// è·å–æ”¿ç­–æ–‡ä»¶æ•°æ®
async function loadPolicies() {
    try {
        const response = await fetch('http://localhost:8000/api/policies');
        const data = await response.json();
        console.log('æ”¿ç­–æ–‡ä»¶:', data);
        return data;
    } catch (error) {
        console.error('è·å–æ•°æ®å¤±è´¥:', error);
    }
}

// è·å–AIæ€»ç»“æ•°æ®
async function loadSummaries() {
    try {
        const response = await fetch('http://localhost:8000/api/summaries');
        const data = await response.json();
        console.log('AIæ€»ç»“:', data);
        return data;
    } catch (error) {
        console.error('è·å–æ€»ç»“å¤±è´¥:', error);
    }
}

// å¯åŠ¨çˆ¬å–ä»»åŠ¡
async function startCrawl() {
    try {
        const response = await fetch('http://localhost:8000/api/crawl', {
            method: 'POST'
        });
        const result = await response.json();
        console.log('çˆ¬å–ç»“æœ:', result);
        return result;
    } catch (error) {
        console.error('çˆ¬å–å¤±è´¥:', error);
    }
}

// å¯åŠ¨AIæ€»ç»“ä»»åŠ¡
async function startSummarize() {
    try {
        const response = await fetch('http://localhost:8000/api/summarize', {
            method: 'POST'
        });
        const result = await response.json();
        console.log('æ€»ç»“ç»“æœ:', result);
        return result;
    } catch (error) {
        console.error('æ€»ç»“å¤±è´¥:', error);
    }
}
```

#### Pythonè°ƒç”¨ç¤ºä¾‹
```python
import requests

# è·å–æ”¿ç­–æ–‡ä»¶æ•°æ®
def get_policies():
    response = requests.get('http://localhost:8000/api/policies')
    return response.json()

# è·å–AIæ€»ç»“æ•°æ®
def get_summaries():
    response = requests.get('http://localhost:8000/api/summaries')
    return response.json()

# å¯åŠ¨çˆ¬å–ä»»åŠ¡
def start_crawl():
    response = requests.post('http://localhost:8000/api/crawl')
    return response.json()

# å¯åŠ¨AIæ€»ç»“ä»»åŠ¡
def start_summarize():
    response = requests.post('http://localhost:8000/api/summarize')
    return response.json()
```

## ğŸ“Š æ•°æ®åº“ç»“æ„

### æ”¿ç­–æ–‡ä»¶è¡¨ (PolicyFile)
```sql
CREATE TABLE policy_files (
    id INTEGER PRIMARY KEY,
    title TEXT NOT NULL,
    source TEXT NOT NULL,
    url TEXT NOT NULL,
    publish_date TEXT,
    publish_unit TEXT,
    keywords_found TEXT,
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### AIæ€»ç»“è¡¨ (AISummary)
```sql
CREATE TABLE ai_summaries (
    id INTEGER PRIMARY KEY,
    policy_id INTEGER,
    title TEXT NOT NULL,
    publish_unit TEXT,
    publish_date TEXT,
    summary TEXT,
    url TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (policy_id) REFERENCES policy_files (id)
);
```

### é…ç½®è¡¨ (CrawlConfig)
```sql
CREATE TABLE crawl_configs (
    id INTEGER PRIMARY KEY,
    website_name TEXT NOT NULL,
    website_url TEXT NOT NULL,
    keywords TEXT NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    last_crawl TIMESTAMP
);
```

## ğŸ”§ éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. å¯åŠ¨APIæœåŠ¡
python main.py --mode api

# 3. æ‰“å¼€å‰ç«¯
start demo_frontend.html
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å¯åŠ¨å®šæ—¶è°ƒåº¦å™¨
python main.py --mode scheduler --schedule weekly

# 2. å¯åŠ¨APIæœåŠ¡ï¼ˆæ–°çª—å£ï¼‰
python main.py --mode api
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### çˆ¬å–ä¼˜åŒ–
- **è¯·æ±‚é—´éš”**: 1-2ç§’ï¼Œé¿å…å¯¹ç›®æ ‡ç½‘ç«™é€ æˆå‹åŠ›
- **è¶…æ—¶è®¾ç½®**: 30ç§’ï¼Œç¡®ä¿ç½‘ç»œå¼‚å¸¸æ—¶èƒ½åŠæ—¶å¤„ç†
- **é‡è¯•æœºåˆ¶**: 3æ¬¡é‡è¯•ï¼Œæé«˜æˆåŠŸç‡
- **å¹¶å‘æ§åˆ¶**: å•çº¿ç¨‹çˆ¬å–ï¼Œé¿å…è¢«å°IP

### æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ä¼˜åŒ–**: è‡ªåŠ¨åˆ›å»ºå¿…è¦ç´¢å¼•
- **æŸ¥è¯¢ä¼˜åŒ–**: ä½¿ç”¨ORMæŸ¥è¯¢ï¼Œé¿å…SQLæ³¨å…¥
- **è¿æ¥æ± **: è‡ªåŠ¨è¿æ¥ç®¡ç†
- **äº‹åŠ¡æ§åˆ¶**: è‡ªåŠ¨äº‹åŠ¡ç®¡ç†



### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
python main.py --mode api 2>&1 | tee system.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" system.log
```

### æ•°æ®é‡ç½®
```bash
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼ˆä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼‰
rm policy_data.db

# é‡æ–°å¯åŠ¨ç³»ç»Ÿ
python main.py --mode api
```

